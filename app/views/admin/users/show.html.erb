<% content_for :page_title do %>
  <%= t('admin.users.show.title') %>
<% end %>

<div class="container mt-4">
  <div class="d-flex justify-content-between align-items-center mb-4">
    <h1><%= t('admin.users.show.title') %></h1>
    <div>
      <%= link_to 'Back to Users', admin_users_path, class: 'btn btn-secondary me-2' %>
      <%= link_to 'Edit User', edit_admin_user_path(@user), class: 'btn btn-primary' %>
    </div>
  </div>

  <div class="card">
    <div class="card-body">
      <div class="row">
        <div class="col-md-6">
          <h5 class="mb-3">Basic Information</h5>
          <table class="table">
            <tr>
              <th>Email</th>
              <td><%= @user.email %></td>
            </tr>
            <tr>
              <th>Admin Status</th>
              <td>
                <% if @user.admin? %>
                  <span class="badge bg-success">Admin User</span>
                <% else %>
                  <span class="badge bg-secondary">Regular User</span>
                <% end %>
              </td>
            </tr>
            <tr>
              <th>Created At</th>
              <td><%= @user.created_at.in_time_zone.strftime("%Y-%m-%d %H:%M") %></td>
            </tr>
            <tr>
              <th>Last Sign In</th>
              <td><%= @user.last_sign_in_at&.in_time_zone&.strftime("%Y-%m-%d %H:%M") || 'Never' %></td>
            </tr>
          </table>
        </div>

        <div class="col-md-6">
          <h5 class="mb-3">User Statistics</h5>
          <table class="table">
            <tr>
              <th>Products Created</th>
              <td><%= @user.products.count %></td>
            </tr>
            <tr>
              <th>Quotes Created</th>
              <td><%= @user.quotes.count %></td>
            </tr>
            <tr>
              <th>Materials</th>
              <td><%= @user.materials.count %></td>
            </tr>
            <tr>
              <th>Manufacturing Processes</th>
              <td><%= @user.manufacturing_processes.count %></td>
            </tr>
          </table>
        </div>
      </div>

      <div class="mt-4">
        <h5 class="mb-3">User Configuration</h5>
        <table class="table">
          <tr>
            <th>Waste Percentage</th>
            <td><%= (@user.waste_percentage * 100).round(2) %>%</td>
          </tr>
          <tr>
            <th>Width Margin</th>
            <td><%= @user.width_margin %> cm</td>
          </tr>
          <tr>
            <th>Length Margin</th>
            <td><%= @user.length_margin %> cm</td>
          </tr>
        </table>
      </div>
    </div>
  </div>
</div>
